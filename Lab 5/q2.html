<!--
 Copyright (c) 2020 | Mathana Kumar S (https://capturemathan.github.io)
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question 2</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
    <link rel="stylesheet" href="./static/q2.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato&family=Pacifico&family=Poppins&family=Quicksand&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <p class="heading has-text-centered">DOB Validator</p>
    </header>
    <article class="message is-small is-danger" id="message-head">
        <div class="message-header">
          <p id="mymessage">Hello World</p>
          <button class="delete" aria-label="delete"></button>
        </div>
    </article>
    <main>
        <div class="columns is-centered">
            <div class="column is-2">
            </div>
            <div class="column is-8">
                <div class="box">
                    <form name="myform" method="POST">
                        <div class="field is-horizontal">
                            <div class="field-label is-normal">
                              <label class="label">Enter DOB</label>
                            </div>
                            <div class="field-body">
                              <div class="field">
                                <div class="control">
                                  <input class="input" type="text" placeholder="08-09-1999" name="dob">
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="buttons is-centered">
                            <input class="button" type="button" value="Validate"  onclick="validateDOB()">
                          </div>                          
                    </form>
                </div>
            </div>
            <div class="column is-2">
            </div>
        </div>
    </main>
<script>
function validateDOB(){
    if(document.getElementById("message-head").classList.contains("is-success")){
        document.getElementById("message-head").classList.remove('is-success');
        document.getElementById("message-head").classList.add('is-danger');
    }
    /* Form Selectors */
    var myform=document.forms["myform"];
    var dob=myform["dob"].value.split("-");
    if(dob.length!=3){
        document.getElementById("mymessage").innerHTML="Please use the format dd-mm-yyyy";
        document.getElementById("message-head").style.visibility="visible";
    }
    else{
        var dd=parseInt(dob[0],10);
        var mm=parseInt(dob[1],10);
        var yy=parseInt(dob[2],10);
        var d = new Date();
        if(dd<=0 || dd>31){
            document.getElementById("mymessage").innerHTML="Please enter the proper date";
            document.getElementById("message-head").style.visibility="visible";
        }
        else if(mm<=0 || mm>12){
            document.getElementById("mymessage").innerHTML="Please enter the proper month";
            document.getElementById("message-head").style.visibility="visible";
        }
        else if(yy>d.getFullYear()||dob[2].length!=4){
            document.getElementById("mymessage").innerHTML="Please enter the proper year";
            document.getElementById("message-head").style.visibility="visible";
        }
        else if((yy==d.getFullYear() && (mm-1==d.getMonth()) && (dd>d.getDate())) || ((yy==d.getFullYear())&&(mm-1>d.getMonth()))){
            document.getElementById("mymessage").innerHTML="Date you entered exceeds the present day.";
            document.getElementById("message-head").style.visibility="visible";
        }
        else{
            document.getElementById("mymessage").innerHTML="Successful DOB entered";
            document.getElementById("message-head").classList.remove('is-danger');
            document.getElementById("message-head").classList.add('is-success');
            document.getElementById("message-head").style.visibility="visible";
        }
    }
}
</script>
</body>
</html>